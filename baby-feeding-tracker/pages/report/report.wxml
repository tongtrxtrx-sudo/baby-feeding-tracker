<view class="container">
  <view wx:if="{{!currentBaby}}" class="empty-state">
    <view class="empty-icon">ğŸ‘¶</view>
    <view class="empty-text">è¯·å…ˆæ·»åŠ å®å®æ¡£æ¡ˆ</view>
    <button class="add-btn btn-primary" bindtap="goToProfile">å»æ·»åŠ </button>
  </view>

  <view wx:if="{{currentBaby}}" class="content">
    <view class="report-header card">
      <view class="header-title">å®å®æˆé•¿è¯„ä¼°æŠ¥å‘Š</view>
      <view class="header-baby">{{currentBaby.name}} Â· {{ageText}}</view>
    </view>

    <view class="feeding-section card">
      <view class="section-title">
        <view class="title-icon">ğŸ¼</view>
        <view>å–‚å…»è¯„ä¼°</view>
      </view>
      <view class="feeding-summary">
        <view class="summary-row flex-between">
          <view class="summary-label">ä»Šæ—¥å¥¶é‡</view>
          <view class="summary-value">{{report.feeding.actual}}ml</view>
        </view>
        <view class="summary-row flex-between">
          <view class="summary-label">æ¨èå¥¶é‡</view>
          <view class="summary-value">{{report.feeding.recommended}}ml</view>
        </view>
        <view class="summary-row flex-between">
          <view class="summary-label">å·®å¼‚</view>
          <view class="summary-value" style="color: {{report.feeding.statusColor}}">
            {{report.feeding.diff > 0 ? '+' : ''}}{{report.feeding.diff}}ml
          </view>
        </view>
        <view class="status-badge" style="background: {{report.feeding.statusColor}}20; color: {{report.feeding.statusColor}}">
          {{report.feeding.status}}
        </view>
      </view>
      <view class="advice-box">
        <view class="advice-title">ğŸ’¡ å–‚å…»å»ºè®®</view>
        <view class="advice-text">{{report.feeding.advice}}</view>
      </view>
    </view>

    <view wx:if="{{report.growth}}" class="growth-section card">
      <view class="section-title">
        <view class="title-icon">ğŸ“</view>
        <view>ç”Ÿé•¿è¯„ä¼°</view>
      </view>

      <view class="growth-grid">
        <view class="growth-item">
          <view class="growth-label">ä½“é‡</view>
          <view class="growth-value">{{report.growth.weight.value}}kg</view>
          <view class="growth-percentile">P{{report.growth.weight.percentile != null ? report.growth.weight.percentile.toFixed(1) : '--'}}</view>
          <view class="growth-status" style="color: {{report.growth.weight.status.color}}">
            {{report.growth.weight.status.status}}
          </view>
        </view>
        <view class="growth-divider"></view>
        <view class="growth-item">
          <view class="growth-label">èº«é«˜</view>
          <view class="growth-value">{{report.growth.height.value}}cm</view>
          <view class="growth-percentile">P{{report.growth.height.percentile != null ? report.growth.height.percentile.toFixed(1) : '--'}}</view>
          <view class="growth-status" style="color: {{report.growth.height.status.color}}">
            {{report.growth.height.status.status}}
          </view>
        </view>
      </view>

      <view class="standard-box" wx:if="{{report.growth.weight.standard && report.growth.height.standard}}">
        <view class="standard-title">WHOæ ‡å‡†èŒƒå›´</view>
        <view class="standard-row flex-between">
          <view>
            <view class="standard-label">ä½“é‡èŒƒå›´</view>
            <view class="standard-value">{{report.growth.weight.standard.p3}} - {{report.growth.weight.standard.p97}}kg</view>
          </view>
          <view>
            <view class="standard-label">ä¸­ä½æ•°</view>
            <view class="standard-value">{{report.growth.weight.standard.p50}}kg</view>
          </view>
        </view>
        <view class="standard-row flex-between mt-20">
          <view>
            <view class="standard-label">èº«é«˜èŒƒå›´</view>
            <view class="standard-value">{{report.growth.height.standard.p3}} - {{report.growth.height.standard.p97}}cm</view>
          </view>
          <view>
            <view class="standard-label">ä¸­ä½æ•°</view>
            <view class="standard-value">{{report.growth.height.standard.p50}}cm</view>
          </view>
        </view>
      </view>

      <view class="advice-box">
        <view class="advice-title">ğŸ’¡ ç”Ÿé•¿å»ºè®®</view>
        <view wx:for="{{report.growth.advices}}" wx:key="*this" class="advice-item">
          {{item}}
        </view>
      </view>
    </view>

    <view wx:if="{{!report.growth}}" class="no-growth card">
      <view class="no-growth-icon">ğŸ“</view>
      <view class="no-growth-text">æš‚æ— ç”Ÿé•¿æ•°æ®</view>
      <button class="add-growth-btn btn-primary" bindtap="goToGrowth">å»è®°å½•</button>
    </view>

    <view class="stats-section card">
      <view class="section-title">
        <view class="title-icon">ğŸ“Š</view>
        <view>æ•°æ®ç»Ÿè®¡</view>
      </view>
      <view class="stats-grid">
        <view class="stat-card">
          <view class="stat-number">{{report.stats.totalFeedings}}</view>
          <view class="stat-desc">å–‚å…»è®°å½•</view>
        </view>
        <view class="stat-card">
          <view class="stat-number">{{report.stats.totalGrowths}}</view>
          <view class="stat-desc">ç”Ÿé•¿è®°å½•</view>
        </view>
        <view class="stat-card">
          <view class="stat-number">{{report.stats.todayTotalMilk}}</view>
          <view class="stat-desc">ä»Šæ—¥å¥¶é‡(ml)</view>
        </view>
      </view>
    </view>
  </view>
</view>
