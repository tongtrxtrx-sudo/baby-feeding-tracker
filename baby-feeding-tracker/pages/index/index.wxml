<view class="container">
  <view wx:if="{{!currentBaby}}" class="empty-state">
    <view class="empty-icon">
      <x-icon name="baby" size="{{80}}" color="#FF8FAB" />
    </view>
    <view class="empty-text">è¯·å…ˆæ·»åŠ å®å®æ¡£æ¡ˆ</view>
    <button class="add-btn btn-primary" bindtap="goToProfile">å»æ·»åŠ </button>
  </view>

  <view wx:if="{{currentBaby}}" class="content">
    <view class="welcome-card card">
      <view class="welcome-decor decor-1"></view>
      <view class="welcome-decor decor-2"></view>
      <view class="welcome-decor decor-3"></view>
      <view class="welcome-left">
        <view class="welcome-text">
          <view class="greeting">{{greetingText}}</view>
          <view class="baby-name">{{currentBaby.name}} {{ageText}}</view>
        </view>
      </view>
      <view class="welcome-right">
        <view class="baby-avatar">ğŸ‘§</view>
        <view class="share-entry" bindtap="goToShare">
          <text class="share-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</text>
          <text class="share-text">å…±äº«</text>
        </view>
      </view>
    </view>

    <view class="today-summary card">
      <view class="summary-header">
        <view class="summary-title">ä»Šæ—¥å–‚å…»</view>
        <view class="summary-date">{{todayDate}}</view>
      </view>
      <view class="summary-stats">
        <view class="stat-card">
          <view class="stat-number text-primary">{{todayFeedings.length}}</view>
          <view class="stat-label text-secondary">å–‚å…»æ¬¡æ•°</view>
        </view>
        <view class="stat-card">
          <view class="stat-number text-primary">{{todayTotalMilk}}</view>
          <view class="stat-label text-secondary">æ€»å¥¶é‡(ml)</view>
        </view>
        <view class="stat-card">
          <view class="stat-number text-primary">{{lastFeedingTime}}</view>
          <view class="stat-label text-secondary">ä¸Šæ¬¡å–‚å…»</view>
        </view>
      </view>
    </view>

    <view class="week-chart card">
      <view class="section-header">
        <view class="section-title">ä¸€å‘¨å¥¶é‡è¶‹åŠ¿</view>
      </view>
      <view class="chart-container">
        <view class="chart-bars">
          <view wx:for="{{weekMilkData}}" wx:key="index" class="chart-bar-wrapper">
            <view class="chart-bar" style="height: {{item > 0 ? (item / maxMilk) * 100 : 0}}%">
              <view wx:if="{{item > 0}}" class="bar-value">{{item}}</view>
            </view>
            <view class="bar-label">{{weekDays[index]}}</view>
          </view>
        </view>
      </view>
    </view>

    <view class="quick-actions">
      <view class="action-card card" bindtap="goToFeeding">
        <text class="action-emoji">ğŸ¼</text>
        <view class="action-text">è®°å½•å–‚å…»</view>
      </view>
      <view class="action-card card" bindtap="goToGrowth">
        <text class="action-emoji">ğŸ“</text>
        <view class="action-text">è®°å½•èº«é«˜ä½“é‡</view>
      </view>
    </view>

    <view wx:if="{{todayFeedings.length > 0}}" class="recent-feedings card">
      <view class="section-header flex-between">
        <view class="section-title">æœ€è¿‘å–‚å…»</view>
        <view class="section-more text-primary" bindtap="goToFeeding">æŸ¥çœ‹å…¨éƒ¨ ></view>
      </view>
      <view wx:for="{{todayFeedings}}" wx:key="id" class="feeding-item">
        <view class="feeding-time text-secondary">{{item.timeText}}</view>
        <view class="feeding-info flex-between">
          <view class="feeding-type">
            <x-icon name="{{item.type === 'breast' ? 'breast' : 'milk'}}" size="{{24}}" color="#666666" />
            <text>{{item.type === 'breast' ? 'æ¯ä¹³' : 'é…æ–¹å¥¶'}}</text>
          </view>
          <view class="feeding-amount text-primary">{{item.amount}}ml</view>
        </view>
      </view>
    </view>

    <view wx:if="{{latestGrowth}}" class="growth-card card">
      <view class="section-header">
        <view class="section-title">æœ€æ–°ç”Ÿé•¿è®°å½•</view>
      </view>
      <view class="growth-stats flex-between">
        <view class="growth-stat">
          <view class="growth-value text-primary">{{latestGrowth.weight}}kg</view>
          <view class="growth-label text-secondary">ä½“é‡</view>
        </view>
        <view class="growth-stat">
          <view class="growth-value text-primary">{{latestGrowth.height}}cm</view>
          <view class="growth-label text-secondary">èº«é«˜</view>
        </view>
        <view class="growth-stat">
          <view class="growth-value text-secondary">{{latestGrowth.date}}</view>
          <view class="growth-label text-secondary">è®°å½•æ—¥æœŸ</view>
        </view>
      </view>
    </view>
  </view>
</view>
